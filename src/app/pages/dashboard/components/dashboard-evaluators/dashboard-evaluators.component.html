@if (resourceDashboard.isLoading()) {
  <app-spinner />
} @else {
  <div class="mb-8 grid grid-cols-2 gap-2 sm:gap-6 lg:grid-cols-4">
    <app-dashboard-card
      title="Evaluaciones Enviadas"
      [value]="data()?.sumary?.enviadas || 0"
      icon="lucideSend"
      iconColor="text-sky-500" />

    <app-dashboard-card
      title="Evaluaciones Por Editar"
      [value]="data()?.sumary?.ediciones_pendientes || 0"
      icon="lucideCircleAlert"
      iconColor="text-yellow-500" />

    <app-dashboard-card
      title="Evaluaciones Aprobadas"
      [value]="data()?.sumary?.aprobadas || 0"
      icon="lucideCircleCheckBig"
      iconColor="text-green-500" />

    <app-dashboard-card
      title="Evaluaciones Rechazadas"
      [value]="data()?.sumary?.rechazadas || 0"
      icon="lucideCircleX"
      iconColor="text-red-500" />
  </div>

  <div>
    <app-dashboard-evaluators-charts [data]="data()!.weekly_progress" />
  </div>

  @if (resourceGoalsProgress.isLoading()) {
    <app-spinner />
  } @else if (resourceGoalsProgress.value()) {
    <hr class="dark:border-bunker-900 my-8 border border-gray-200" />
    <div
      class="mb-8 grid grid-cols-1 gap-2 sm:grid-cols-2 sm:gap-6 lg:grid-cols-4">
      @for (progress of resourceGoalsProgress.value(); track $index) {
        <div
          class="dark:bg-bunker-900/40 dark:border-bunker-900 flex flex-col gap-2 rounded-lg border border-gray-300 bg-white p-6 py-4 shadow-sm transition-shadow duration-200 hover:shadow-lg">
          <!-- Campaign Name -->
          <div class="flex flex-row items-center justify-between space-y-0">
            <h3
              class="text-xs font-medium tracking-tight text-gray-600 sm:text-sm dark:text-gray-300">
              {{ progress.campaign_name }}
            </h3>
          </div>
          <!-- Progress -->
          <div class="pt-1">
            <div class="text-2xl font-bold text-gray-900 dark:text-gray-100">
              <p-progressbar
                [value]="
                  (progress.goal_complete / progress.goal_evaluator || 0) * 100
                "></p-progressbar>
            </div>
          </div>
          <!-- Progress values -->
          <p
            class="text-xs font-medium tracking-tight text-gray-600 dark:text-gray-300">
            {{ progress.goal_complete || 0 }} / {{ progress.goal_evaluator }}
          </p>
        </div>
      }
    </div>
  }

  <div class="my-4 grid md:grid-cols-3">
    <app-dashboard-quick-actions [actions]="actions()" />
  </div>
}
