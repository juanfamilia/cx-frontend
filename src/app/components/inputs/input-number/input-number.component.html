<div>
  <p-inputgroup>
    @if (icon()) {
      <p-inputgroup-addon>
        <ng-icon [name]="icon()" size="20" class="size-5 text-gray-500" />
      </p-inputgroup-addon>
    }
    <p-floatlabel variant="on">
      <p-inputnumber
        [inputId]="id()"
        [(ngModel)]="value"
        (onInput)="onInput($event.value)"
        (onBlur)="onTouched()"
        [mode]="mode()"
        [minFractionDigits]="minDecimalDigits()"
        [maxFractionDigits]="maxDecimalDigits()"
        [min]="min()"
        [max]="max()"
        [disabled]="disabled"
        [ngClass]="{
          'ng-dirty ng-invalid':
            ngControl.touched && ngControl.invalid && ngControl.dirty,
        }"
        class="w-full" />
      <label class="font-normal" for="{{ id() }}">{{ label() }}</label>
    </p-floatlabel>
  </p-inputgroup>

  @if (ErrorMessage()) {
    @if (ngControl.touched && ngControl.invalid && ngControl.dirty) {
      <p-message styleClass="mt-2" severity="error">
        @if (ngControl.errors?.['required']) {
          <span>Este campo es obligatorio.</span>
        }
        @if (ngControl.errors?.['minlength']) {
          <span>
            Este campo debe tener al menos
            {{ ngControl.errors?.['minlength'] }} digitos.
          </span>
        }
        @if (ngControl.errors?.['min']) {
          <span>
            El valor debe ser mayor o igual a
            {{ ngControl.errors?.['min'].min }}.
          </span>
        }
      </p-message>
    }
  }
</div>
